<!DOCTYPE html>
<html lang="en">
<head>

    <meta property="og:title" content="ClintStevensTV" />
  <meta property="og:description" content="Play the Clint Stevens Gacha Game." />
  <meta property="og:url" content="https://clintstevens.tv/" />
  <meta property="type" content="website" />
  <meta property="og:image" content="https://clintstevens.tv/images/clint.jpg" />
  <meta property="og:site_name" content="Created by DarthTaksil" />

  <link rel="icon" type="image/x-icon" href="/clint.ico">

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="market.css">
    <title>The Market</title>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script type="module" src="/secret/cardgame/market.js"></script>

</head>

<body>

  <!-- Sidebar -->
  <div id="market-sidebar">
      <div id="market-user-info">
          <div id="market-username">Loading...</div>
          <a href="index.html" class="sidebar-link">Back to Clintdex</a>
          <button id="sell-card-btn" class="sidebar-button">Sell a Card</button>
      </div>

      <div id="market-wallet">
          <img src="/images/wallet.webp" alt="ClintCoin">
          <span id="market-wallet-amount">0</span>
      </div>
  </div>

  <!-- Main Listings -->
  <main id="market-main">
      <section id="your-listings-section">
        <h1>Your Listings</h1>
        <div id="your-listings-grid" class="card-grid"></div>
      </section>
      <h1>Player Market</h1>
      <div id="market-grid" class="card-grid"></div>
  </main>

  <!-- Sell Card Modal -->
  <div id="sell-modal-overlay" class="modal-overlay hidden">
      <div id="sell-modal" class="modal-window">
          <h2>Sell a Card</h2>
          <ul id="sell-card-list" class="card-list"></ul>

          <button id="sell-modal-close" class="close-button">Close</button>
      </div>
  </div>

  <!-- Buy Card Modal -->
  <div id="buy-modal-overlay" class="modal-overlay hidden">
    <div id="buy-modal" class="modal-window">
      <div class="modal-top">
        <div class="modal-card-img">
          <img id="buy-card-img" src="" alt="Card Image" />
        </div>
        <div class="modal-card-info">
          <p><strong>Seller:</strong> <span id="buy-seller-name">Loading...</span></p>
          <p><strong>Listed:</strong> <span id="buy-listed-time">--</span></p>
          <p><strong>Price:</strong> <span id="buy-card-price">--</span></p>
          <button id="buy-confirm-btn" class="buy-button">Buy</button>
          <div id="buy-confirmation" class="hidden">
            Confirm? 
            <button id="buy-yes-btn" class="confirm-btn">Yes</button>
            <button id="buy-no-btn" class="confirm-btn">No</button>
          </div>
        </div>
      </div>
      <div class="modal-bottom">
        <h3>Other Listings</h3>
        <div id="similar-listings" class="similar-listings">
          <!-- Similar cards will be injected here -->
        </div>
      </div>
      <button id="buy-modal-close" class="close-button">Close</button>
    </div>
  </div>


  <script type="module" src="market.js"></script>

</body>
</html>